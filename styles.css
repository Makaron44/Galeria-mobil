:root{
  --pad:12px; --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.30);
  --glass:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.15);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(1200px 1200px at 20% -10%, #1f2331 0%, #0f1115 45%, #0b0d11 100%);
  color:#eaeaea;
}

/* HEADER */
.app-header{
  position:sticky; top:0; z-index:50;
  padding: calc(12px + env(safe-area-inset-top)) var(--pad) 10px;
  backdrop-filter:saturate(1.2) blur(10px);
  background:
    linear-gradient(180deg, rgba(7,8,12,.85) 0%, rgba(7,8,12,.65) 100%),
    radial-gradient(800px 200px at 40% -50%, rgba(99,102,241,.22), transparent 60%);
  border-bottom:1px solid rgba(255,255,255,.06);
}
.topbar{display:flex;align-items:center;gap:10px}
.app-header h1{font-size:18px;margin:0;letter-spacing:.3px}
.version{font-size:.75em;font-weight:400;color:#94a3b8;margin-left:6px}
.count-badge{font-size:12px;padding:4px 8px;border-radius:999px;background:#eaeaea;color:#111;font-weight:800}

/* Search */
.searchbar{margin-top:10px;display:flex;gap:8px;background:var(--glass);border:1px solid var(--stroke);
  border-radius:12px;padding:6px 8px}
.searchbar input{flex:1;border:0;outline:0;background:transparent;color:#eaeaea;font-size:15px;padding:6px}
.searchbar button{border:0;background:transparent;color:#cbd5e1;font-size:16px;padding:6px 8px}

/* Chips – NEON */
.toolbar{display:flex;gap:8px;padding-top:8px;overflow-x:auto;-webkit-overflow-scrolling:touch}
.chip{
  flex:none;padding:10px 14px;border-radius:999px;background:var(--glass);color:#eaeaea;border:1px solid var(--stroke);
  transition:transform .1s ease; position:relative; isolation:isolate;
}
.chip:active{transform:scale(.98)}
.chip.active{background:#eaeaea;color:#111;border-color:#eaeaea}
.chip::before{content:"";position:absolute;inset:-2px;border-radius:inherit;z-index:-1;
  filter:blur(12px);opacity:.45;transition:opacity .2s}
.chip-c1::before{background:linear-gradient(90deg,#60a5fa,#a78bfa)}
.chip-c2::before{background:linear-gradient(90deg,#34d399,#22d3ee)}
.chip-c3::before{background:linear-gradient(90deg,#f472b6,#fb7185)}
.chip-c4::before{background:linear-gradient(90deg,#f59e0b,#84cc16)}
.chip-settings::before{background:linear-gradient(90deg,#22d3ee,#8b5cf6)}
.chip:hover::before{opacity:.75}

/* Actions bar */
.actionsbar{display:flex;gap:8px;margin-top:10px;overflow-x:auto}
.mini-btn{
  flex:none; padding:8px 10px; font-weight:700; font-size:12px; border-radius:10px;
  background:rgba(255,255,255,.06); color:#eaeaea; border:1px solid rgba(255,255,255,.18);
}
.mini-btn.danger{border-color:#ef4444;color:#fecaca}

/* MAIN */
.app-main{padding:var(--pad);padding-bottom:calc(120px + env(safe-area-inset-bottom));min-height:calc(100vh - 60px)}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
@media(min-width:520px){.grid{grid-template-columns:repeat(3,1fr)}}

/* Card */
.card{position:relative;background:rgba(19,22,30,.9);border:1px solid rgba(255,255,255,.06);
  border-radius:16px;box-shadow:var(--shadow);overflow:hidden;animation:pop .25s ease both}
@keyframes pop{from{transform:translateY(6px);opacity:0}to{transform:none;opacity:1}}
.card .img-wrap{position:relative}
.card img{width:100%;height:170px;object-fit:cover;display:block;background:linear-gradient(120deg,#1e2637,#131824)}
.badge{position:absolute;top:8px;right:8px;background:rgba(0,0,0,.55);color:#fff;font-weight:800;font-size:11px;
  padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.25);backdrop-filter:blur(6px)}
.meta{padding:10px 12px;font-size:13px}.meta .title{font-weight:800;margin-bottom:2px}.meta .desc{color:#b9c0cf;line-height:1.35}
.empty{text-align:center;color:#b9c0cf;padding:40px 10px}

/* FAB + NEON + shine/puls */
.fab{position:fixed;left:0;right:0;bottom:calc(16px + env(safe-area-inset-bottom));z-index:60;display:flex;gap:10px;justify-content:center;padding:0 var(--pad)}
.btn{border:0;border-radius:999px;padding:12px 18px;font-weight:800;position:relative;isolation:isolate;box-shadow:var(--shadow)}
.btn-primary{background:#eaeaea;color:#111}
.btn-primary::before{content:"";position:absolute;inset:-2px;border-radius:inherit;z-index:-1;
  background:radial-gradient(120px 120px at 30% 30%, rgba(255,255,255,.45), transparent 60%),
             linear-gradient(90deg,#8b5cf6,#06b6d4,#22c55e);
  filter:blur(10px);opacity:.65;animation:neonPulse 2.8s ease-in-out infinite}
.btn-secondary{background:rgba(255,255,255,.06);color:#eaeaea;border:1px solid rgba(255,255,255,.18)}
.btn-secondary::before{content:"";position:absolute;inset:-2px;border-radius:inherit;z-index:-1;
  background:linear-gradient(90deg,#06b6d4,#22c55e,#f59e0b);filter:blur(14px);opacity:.35;animation:neonPulse 3.2s ease-in-out infinite}
@keyframes neonPulse{0%{opacity:.35}50%{opacity:.55}100%{opacity:.35}}

/* ripple */
.ripple{position:relative;overflow:hidden}
.ripple:after{content:"";position:absolute;inset:0;border-radius:inherit;opacity:0;transform:scale(0);
  background:radial-gradient(120px 120px at var(--x) var(--y), rgba(255,255,255,.35), transparent 60%);
  transition:transform .35s ease, opacity .6s ease}
.ripple:active:after{opacity:1;transform:scale(1)}

/* Shine/puls na przyciskach */
.action-btn{position:relative;overflow:hidden;animation:pulseBtn 3.5s ease-in-out infinite}
.action-btn::after{content:"";position:absolute;top:0;left:-50%;width:50%;height:100%;
  background:linear-gradient(120deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.35) 50%,rgba(255,255,255,0) 100%);
  transform:skewX(-20deg);animation:shineBtn 4s infinite}
@keyframes shineBtn{0%{left:-60%}100%{left:120%}}
@keyframes pulseBtn{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}

/* SHEET */
.sheet{position:fixed;left:0;right:0;bottom:-100%;background:rgba(19,22,30,.98);color:#eaeaea;border-top-left-radius:20px;border-top-right-radius:20px;
  box-shadow:0 -18px 50px rgba(0,0,0,.6);transition:bottom .28s ease;padding:18px;z-index:70;max-height:80vh;overflow:auto;
  padding-bottom:calc(18px + env(safe-area-inset-bottom))}
.sheet.open{bottom:0}.sheet h2{margin:4px 0 8px;font-size:16px}.hint{font-size:12px;color:#b9c0cf;margin-bottom:8px}
.fld{display:grid;gap:6px;margin:10px 0}
input[type="text"],textarea,select{width:100%;padding:12px;border:1px solid rgba(255,255,255,.12);background:#0f1115;color:#eaeaea;border-radius:12px;font-size:15px}
textarea{min-height:70px;resize:vertical}.sheet-actions{display:flex;gap:10px;margin-top:10px}.sheet-actions .btn{flex:1}

/* Ustawienia: radio */
.radio-group{display:grid;gap:10px;margin:10px 0}
.radio{display:flex;gap:10px;align-items:flex-start;background:rgba(255,255,255,.04);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.1)}
.radio input{margin-top:2px}
.radio em{opacity:.85}

/* Action sheet */
.action-sheet{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:flex-end;justify-content:center;z-index:75}
.action-sheet.open{display:flex}
.action-content{background:#161a24;border-top-left-radius:16px;border-top-right-radius:16px;width:100%;max-width:520px;padding:12px;border:1px solid rgba(255,255,255,.08)}
.action-btn.danger{background:#3a1f25;border:1px solid #8b1d2c;color:#fff}

/* LIGHTBOX */
.lightbox{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:80;padding:20px}
.lightbox.open{display:flex}
.fade-img{opacity:0;transition:opacity .25s ease}
.fade-img.loaded{opacity:1}
.lightbox img{max-width:100%;max-height:72vh;object-fit:contain;border-radius:12px;box-shadow:var(--shadow)}
.closeX{position:absolute;top:calc(16px + env(safe-area-inset-top));right:16px;font-size:22px;background:transparent;color:#fff;border:1px solid rgba(255,255,255,.35);border-radius:999px;width:40px;height:40px}
.light-title{font-weight:800;margin-top:10px}.light-desc{opacity:.9;text-align:center;max-width:90vw}
.lb-controls{display:flex;gap:10px;margin-top:10px}

/* Toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(20px + env(safe-area-inset-bottom));
  background:rgba(0,0,0,.8);color:#fff;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);
  z-index:100;opacity:0;pointer-events:none;transition:opacity .2s ease, transform .2s ease}
.toast.show{opacity:1;transform:translate(-50%,-6px)}

/* Welcome */
.welcome{
  position:fixed; inset:0; z-index:9999;
  display:flex; align-items:center; justify-content:center;
  background:radial-gradient(1200px 1200px at 20% -10%, #1f2331 0%, #0f1115 45%, #0b0d11 100%);
  transition:opacity .5s ease, visibility .5s ease;
  opacity:1; visibility:visible;
}
.welcome.hide{ opacity:0; visibility:hidden; }
.welcome-box{ text-align:center; color:#eaeaea; padding:18px }
.welcome-title{ font-weight:800; font-size:20px; margin-top:14px }
.welcome-sub{ color:#cbd5e1; margin-top:6px; font-size:14px }
.welcome-tip{ margin-top:16px; font-size:12px; color:#9aa3b2; opacity:.85 }
/* logo */
.welcome-logo .cam{
  width:180px; height:58px; margin:0 auto; border-radius:16px;
  background:linear-gradient(90deg,#8b5cf6,#06b6d4,#22c55e);
  position:relative; box-shadow:0 18px 40px rgba(0,0,0,.35);
  overflow:hidden;
}
.welcome-logo .cam::after{
  content:""; position:absolute; top:0; left:-50%; width:50%; height:100%;
  background:linear-gradient(120deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.4) 50%,rgba(255,255,255,0) 100%);
  transform:skewX(-20deg); animation:shine 2.2s infinite;
}
@keyframes shine{0%{left:-60%}100%{left:120%}}
.welcome-logo{animation:pulse 3s ease-in-out infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.04)}}
.welcome-logo .lens{position:absolute;left:28px;top:10px;width:38px;height:38px;border-radius:50%;background:#0b0d11;box-shadow:0 0 0 6px rgba(255,255,255,.18) inset}
.welcome-logo .slot,.welcome-logo .slot2{position:absolute;right:24px;height:12px;border-radius:999px;background:#0b0d11}
.welcome-logo .slot{width:56px;top:12px}.welcome-logo .slot2{width:56px;bottom:12px}

/* Lightbox swipe – by UX */
#lightImg{-webkit-user-drag:none;user-select:none;touch-action:pan-y}
@media (prefers-reduced-motion: reduce){ .welcome{transition:none} }
/* ===== Action sheet – większe przyciski + neon ===== */
.action-sheet{
  position:fixed; inset:0; z-index:75;
  display:none; align-items:flex-end; justify-content:center;
  background:rgba(0,0,0,.45);
  backdrop-filter:saturate(1.1) blur(4px);
}
.action-sheet.open{ display:flex; }

.action-content{
  width:100%; max-width:520px;
  background:#121622;
  border-top-left-radius:18px; border-top-right-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  padding:14px;
  box-shadow:0 -18px 50px rgba(0,0,0,.5);
  padding-bottom:calc(14px + env(safe-area-inset-bottom));
}

/* bazowy wygląd przycisków w tym panelu */
.action-sheet .action-btn{
  display:block; width:100%;
  font-weight:800; font-size:16px; letter-spacing:.2px;
  padding:14px 16px; margin:8px 0;
  border-radius:14px; border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06); color:#eaeaea;
  position:relative; isolation:isolate;
  transition:transform .08s ease, background .2s ease, border-color .2s ease;
  box-shadow:0 8px 22px rgba(0,0,0,.35);
}
.action-sheet .action-btn:active{ transform:scale(.98); }

/* neon—delikatny glow jak w chipach */
.action-sheet .action-btn::before{
  content:""; position:absolute; inset:-2px; z-index:-1; border-radius:inherit;
  background:linear-gradient(90deg,#8b5cf6,#06b6d4,#22c55e);
  filter:blur(14px); opacity:.35; transition:opacity .2s ease;
}
.action-sheet .action-btn:hover::before{ opacity:.55; }

/* warianty */
.action-sheet .action-btn#actEdit{
  /* lekki akcent „primary” */
  border-color:rgba(99,102,241,.35);
  background:linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.06));
}
.action-sheet .action-btn#actEdit::before{
  background:linear-gradient(90deg,#60a5fa,#a78bfa);
}

.action-sheet .action-btn.danger,
.action-sheet .action-btn#actDelete{
  border-color:#ef4444;
  background:linear-gradient(180deg, rgba(239,68,68,.18), rgba(239,68,68,.08));
  color:#ffe8e8;
}
.action-sheet .action-btn.danger::before,
.action-sheet .action-btn#actDelete::before{
  background:linear-gradient(90deg,#f43f5e,#ef4444,#fb7185);
  opacity:.4;
}

.action-sheet .action-btn#actCancel{
  border-color:rgba(255,255,255,.18);
  background:rgba(255,255,255,.07);
  color:#eaeaea;
}
/* ===== PIN modal ===== */
.pin-modal{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.55);backdrop-filter:blur(6px) saturate(1.1)}
.pin-modal.hide{display:none}
.pin-box{width:min(92vw,420px);background:#121622;border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px;box-shadow:0 24px 70px rgba(0,0,0,.55)}
.pin-box h3{margin:0 0 10px;font-size:18px}
.pin-fields{display:grid;gap:10px;margin:10px 0}
.pin-input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:#0f1118;color:#eaeaea;font-weight:700;text-align:center;letter-spacing:2px}
.pin-input::placeholder{opacity:.5;font-weight:600}
.pin-input.error{border-color:#ef4444}
.pin-msg{min-height:18px;margin:4px 2px;color:#fca5a5;font-weight:700}
.pin-msg.ok{color:#86efac}
.pin-row{display:flex;gap:10px;margin-top:8px}
.pin-btn{flex:1;padding:11px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.07);color:#eaeaea;font-weight:800}
.pin-btn.ok{background:linear-gradient(90deg,#8b5cf6,#06b6d4,#22c55e);border-color:#8b5cf6}
.pin-note{opacity:.7;font-size:12px;margin-top:10px}
/* iOS: zapobiegaj auto-zoomowi na polach formularzy */
:root { --ios-input-font: 17px; }              /* >=16px */
input, textarea, select, .pin-input {
  font-size: var(--ios-input-font) !important; /* ważne: >=16 */
  -webkit-text-size-adjust: 100%;
  line-height: 1.2;
}
@supports (-webkit-touch-callout: none) {
  /* iOS-only – dopchnij do 17px, gdyby coś nadpisało */
  input, textarea, select, .pin-input { font-size: 17px !important; }
}
